//*****************************************************************************
//  debugモジュール
//  author: 中島将浩
//  update: 2014/05/13
//*****************************************************************************
#ifndef _DEBUG_H_
#define _DEBUG_H_

#include "main.h"
#include <d3dx9.h>

#include "renderer.h"

//*****************************************************************************
//  constant
//*****************************************************************************
//#define _DEBUG_HIT_DRAW_

//*****************************************************************************
//  class
//*****************************************************************************
class Renderer;

class Debug{
public:
	//*****************************************************************************
	//【コンストラクタ】
	//  引数: なし
	//*****************************************************************************
	Debug(){}


	//*****************************************************************************
	//【デス様】
	//  あとかたづけ
	//  引数: なし
	//*****************************************************************************
	virtual ~Debug(){Release();}

	//*****************************************************************************
	//【初期化】
	//  バッファクリア、フォントの取得
	//  返り値: 初期化に成功したかどうか
	//  引数: なし
	//*****************************************************************************
	static HRESULT SetUp(void);

	//*****************************************************************************
	//【終了】
	//  返り値: なし
	//  引数: なし
	//*****************************************************************************
	static void Release(void);

	//*****************************************************************************
	//【出力】
	//  返り値: なし
	//  第1引数: 文字列
	//  第2引数: 可変長引数
	//*****************************************************************************
	static void Print(char* format, ...);

	//*****************************************************************************
	//【描画】
	//  返り値: なし
	//  引数: なし
	//*****************************************************************************
	static void Draw(void);

	//accessor
	static void SetRenderer(Renderer *renderer){Debug::renderer = renderer;}

	static void SetCameraView(D3DXMATRIX *value){camera_view = *value;}
	static void EntryHitView(D3DXVECTOR3 pos, float radius);


private:
	static void LoadHitView(void);
	static void ReleaseHitView(void);

	static const int BUFFER_MAX = 1024;

	static Renderer *renderer;
	static char buffer[BUFFER_MAX];
	static LPD3DXFONT font;					// フォントへのポインタ

	static LPDIRECT3DVERTEXBUFFER9 vtx;			//頂点バッファのポインタ
	static int texture_index;

	struct HIT_VIEW{
		D3DXVECTOR3 position;
		float radius;
		bool flag;
	};

	static const int HIT_VIEW_MAX = 128;
	static HIT_VIEW hit_view[HIT_VIEW_MAX];
	static D3DXMATRIX camera_view;


};

//accessor

#endif//_DEBUG_H_